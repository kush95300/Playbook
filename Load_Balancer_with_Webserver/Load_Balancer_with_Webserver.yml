 - vars_prompt:
          - name: port
            prompt: "Enter LB Port no. (e.g : 8080 ) "
            private: no
 - vars:
          - i: "0.0.0.0"
 - host1: "webserver"
   tasks:
          - name: " Webserver Installation"
            package:
                  name: "httpd"
                  state: present
          - name: "Create volume Website "
            file:
                  state: "directory"
                  path: "/website"
          - name: "Website Configured"
            copy:
                  dest: 
                        - "/website/index.php"
                        - "/var/www/html/index.html"
                  content: >
                          <pre>
                          <?php

                          print `ifconfig`

                          ?>

                          <h1> Website Successfully Hosted </h1>
                          <h2>   Created by Kaushal Soni </h2>
                          </pre>      
          - name: "Start Webserver Service"
            service:
                  name: "httpd"
                  state: started 
                  enabled: yes
 - host2: "Loadbalancer"
   task:
          - name: "Install Load Balancer Software"
            package:
                  name: "haproxy"
                  state: present
          - name: "Server Configured"
            template:
                  dest: "/etc/haproxy/haproxy.cfg"
                  src: "naproxy.cfg"
            notify: "restart service"
          - name: "Start Load Balancer Service"
            service:
                  name: "haproxy"
                  state: started 
                  enabled: yes

   handlers:
           - name: "restart service"
             service:
                  name: "haproxy"
                  state: restarted
