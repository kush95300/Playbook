          - block:
                  - name: "updating topic"
                    shell: "grep 'auto_webservers' {{ inventory }}"
                    changed_when: false
            rescue:
                  - name: "Creating group tag"
                    shell: "echo -e '\n[auto_webservers]' | cat >> {{ inventory }}"
          - name: "updating Inventory"
            lineinfile:
                  dest: "{{ inventory }}"
                  regexp: '^[auto_weservers]'
                  line: "{{ item ['public_ip'] }} ansible_user=ec2-user ansible_ssh_private_key_file=~/newkey.pem  ansible-connection=ssh"
            loop: "{{ contents.instances }}"
          - meta: refresh_inventory

